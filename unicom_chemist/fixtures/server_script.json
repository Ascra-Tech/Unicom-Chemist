[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2026-01-03 10:20:12.098114",
  "module": "Unicom Chemist",
  "name": "POS Naming series",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "POS Invoice",
  "script": "branch = doc.branch\r\n\r\n# If branch is coming from POS Profile\r\nif not branch and doc.pos_profile:\r\n    branch = frappe.db.get_value(\r\n        \"POS Profile\",\r\n        doc.pos_profile,\r\n        \"branch\"\r\n    )\r\n\r\nif not branch:\r\n    frappe.throw(\"Branch is mandatory for POS Invoice\")\r\n\r\nbranch_abbr = frappe.db.get_value(\r\n    \"Branch\",\r\n    branch,\r\n    \"custom_abbr\"\r\n)\r\n\r\nif not branch_abbr:\r\n    frappe.throw(\r\n        f\"Branch abbreviation (custom_abbr) is missing for Branch: {branch}. \"\r\n        \"Please configure it before creating POS Invoice.\"\r\n    )\r\n\r\ndoc.naming_series = f\"POS-{branch_abbr}-.YY.-.##\"\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2026-01-03 10:20:12.107780",
  "module": "Unicom Chemist",
  "name": "Material Request Branch wise",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Material Request",
  "script": "branches = set()\r\n\r\n# Collect branch from each item row\r\nfor item in doc.items:\r\n    if item.branch:\r\n        branches.add(item.branch)\r\n\r\nif not branches:\r\n    frappe.throw(\r\n        \"Branch is mandatory in Material Request Items \"\r\n        \"(Accounting Dimension).\"\r\n    )\r\n\r\n# âŒ Do not allow multiple branches\r\nif len(branches) > 1:\r\n    frappe.throw(\r\n        \"All items in a Material Request must belong to the same Branch.\"\r\n    )\r\n\r\nbranch = branches.pop()\r\n\r\n# Get branch abbreviation\r\nbranch_abbr = frappe.db.get_value(\r\n    \"Branch\",\r\n    branch,\r\n    \"custom_abbr\"\r\n)\r\n\r\nif not branch_abbr:\r\n    frappe.throw(\r\n        f\"Branch abbreviation (custom_abbr) is missing for Branch: {branch}\"\r\n    )\r\n\r\n# Set naming series\r\ndoc.naming_series = f\"MR-{branch_abbr}-.YY.-.##\"\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2026-01-03 10:20:12.128615",
  "module": "Unicom Chemist",
  "name": "Item naming series",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Item",
  "script": "# Server Script for Item Auto-Naming\n# Event: Before Insert\n\nif doc.is_new():\n    if not doc.item_group:\n        frappe.throw('Item Group is required')\n    \n    item_group_name = frappe.db.get_value('Item Group', doc.item_group, 'item_group_name')\n    \n    if not item_group_name:\n        frappe.throw('Item Group not found')\n    \n    parts = item_group_name.split('-')\n    \n    if len(parts) >= 2:\n        part1 = parts[0].strip()[:3].upper()\n        part2 = parts[1].strip()[:3].upper()\n        prefix = f'{part1}-{part2}'\n    else:\n        prefix = item_group_name[:6].upper().replace(' ', '').replace('-', '')\n    \n    series_pattern = f'{prefix}-.####'\n    \n    doc.naming_series =series_pattern",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2026-01-03 10:20:12.118232",
  "module": "Unicom Chemist",
  "name": "Sales Invoice Naming Series",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Sales Invoice",
  "script": "branch = doc.branch\r\n\r\n\r\nif not branch:\r\n    frappe.throw(\"Branch is mandatory for Sales Invoice\")\r\n\r\nbranch_abbr = frappe.db.get_value(\r\n    \"Branch\",\r\n    branch,\r\n    \"custom_abbr\"\r\n)\r\n\r\nif not branch_abbr:\r\n    frappe.throw(\r\n        f\"Branch abbreviation (custom_abbr) is missing for Branch: {branch}. \"\r\n        \"Please configure it before creating Sales Invoice.\"\r\n    )\r\n\r\n# Branch-wise Sales Invoice naming series\r\ndoc.naming_series = f\"SI-{branch_abbr}-.YY.-.##\"\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2026-01-03 10:20:12.086775",
  "module": "Unicom Chemist",
  "name": "Purchase Invoice Naming Script",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Purchase Invoice",
  "script": "#Created By Garima on 1-1-26 \r\n#Naming Series for Purchase Invoice using branch abbreviation\r\n\r\nbranch = doc.branch\r\n\r\nif not branch:\r\n    frappe.throw(\"Branch is mandatory for Purchase Invoice\")\r\n\r\nbranch_abbr = frappe.db.get_value(\r\n    \"Branch\",\r\n    branch,\r\n    \"custom_abbr\"\r\n)\r\n\r\nif not branch_abbr:\r\n    frappe.throw(\r\n        f\"Branch abbreviation (custom_abbr) is missing for Branch: {branch}. \"\r\n        \"Please configure it before creating Purchase Invoice.\"\r\n    )\r\n\r\n# Branch-wise Purchase Invoice naming series\r\ndoc.naming_series = f\"PINV-{branch_abbr}-.YY.-.##\"\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2026-01-03 10:20:12.068245",
  "module": "Unicom Chemist",
  "name": "Material Transfer Naming Script",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Stock Entry",
  "script": "# Run only for Material Transfer\r\nif doc.stock_entry_type == \"Material Transfer\":\r\n\r\n    branches = set()\r\n\r\n    # Collect branch from item rows\r\n    for item in doc.items:\r\n        if item.branch:\r\n            branches.add(item.branch)\r\n\r\n    if not branches:\r\n        frappe.throw(\r\n            \"Branch is mandatory in Material Transfer Items \"\r\n            \"(Accounting Dimension).\"\r\n        )\r\n\r\n    # Do not allow multiple branches\r\n    if len(branches) > 1:\r\n        frappe.throw(\r\n            \"All items in a Material Transfer must belong to the same Branch.\"\r\n        )\r\n\r\n    branch = branches.pop()\r\n\r\n    # Optional but recommended\r\n    doc.branch = branch\r\n\r\n    # Get branch abbreviation\r\n    branch_abbr = frappe.db.get_value(\r\n        \"Branch\",\r\n        branch,\r\n        \"custom_abbr\"\r\n    )\r\n\r\n    if not branch_abbr:\r\n        frappe.throw(\r\n            f\"Branch abbreviation (custom_abbr) is missing for Branch: {branch}\"\r\n        )\r\n\r\n    # Branch-wise Material Transfer naming series\r\n    doc.naming_series = f\"MT-{branch_abbr}-.YY.-.##\"\r\n",
  "script_type": "DocType Event"
 }
]